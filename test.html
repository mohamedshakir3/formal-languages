<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>Jenkins Build Status</title>
</head>
<body style="margin: 0; padding: 0; background-color: #1a1f2e;">
    <!--[if mso]>
    <table width="800" cellpadding="0" cellspacing="0" border="0" style="width:800px;">
    <tr><td>
    <![endif]-->
    
    <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; max-width: 800px; margin: 0 auto; border-collapse: collapse; background-color: #1a1f2e; color: #ffffff; font-family: Arial, sans-serif;">
        <!-- Header Section -->
        <tr>
            <td style="padding: 32px 24px;">
                <table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
                    <tr>
                        <td style="width: 156px; vertical-align: top;">
                            <img alt="logo" src="${logoUrl}" style="width: 120px; display: block;">
                        </td>
                        <td style="padding-left: 24px; vertical-align: top;">
                            <div style="font-size: 12px; color: #8b92a5; letter-spacing: 2px; text-transform: uppercase; font-family: Arial, sans-serif;">
                                Jenkins Workflow Status
                            </div>
                            <div style="font-size: 24px; color: #ffffff; margin-top: 8px; font-family: Arial, sans-serif;">
                                ${buildResult == 'SUCCESS' ? 'The job is done' : "The job couldn't be done"}
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <!-- Main Build Info Card -->
        <tr>
            <td style="padding: 0 24px;">
                <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #242938;">
                    <tr>
                        <td style="padding: 24px; border-radius: 16px;">
                            <table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
                                <tr>
                                    <td style="width: 48px; vertical-align: top;">
                                        <img alt="jenkins" src="${jenkinsLogoUrl}" style="width: 48px; display: block;">
                                    </td>
                                    <td style="padding-left: 24px; vertical-align: top;">
                                        <div style="color: #ffffff; font-size: 18px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                            ${projectName}
                                        </div>
                                        <div style="color: #8b92a5; font-size: 14px; font-family: Arial, sans-serif;">
                                            Deploys from GitHub • Build #${buildNumber} • ${buildDuration}
                                        </div>
                                        <table cellpadding="0" cellspacing="0" border="0" style="margin-top: 12px;">
                                            <tr>
                                                <td style="background-color: ${buildResult == 'SUCCESS' ? '#1a402b' : '#4a1c24'}; border-radius: 12px;">
                                                    <span style="color: ${buildResult == 'SUCCESS' ? '#4ade80' : '#ff4d6b'}; padding: 4px 12px; font-size: 14px; display: block;">
                                                        ${buildResult}
                                                    </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <!-- Build Metrics Section -->
        <tr>
            <td style="padding: 24px;">
                <table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
                    <tr>
                        <td style="width: 33%; padding-right: 16px;">
                            <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #242938;">
                                <tr>
                                    <td style="padding: 24px; border-radius: 16px;">
                                        <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                            Tests Passed
                                        </div>
                                        <div style="color: #ffffff; font-size: 24px; font-family: Arial, sans-serif;">
                                            ${testCount}
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="width: 33%; padding-right: 16px;">
                            <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #242938;">
                                <tr>
                                    <td style="padding: 24px; border-radius: 16px;">
                                        <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                            Coverage
                                        </div>
                                        <div style="color: #ffffff; font-size: 24px; font-family: Arial, sans-serif;">
                                            ${coverage}%
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="width: 33%;">
                            <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #242938;">
                                <tr>
                                    <td style="padding: 24px; border-radius: 16px;">
                                        <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                            Build Time
                                        </div>
                                        <div style="color: #ffffff; font-size: 24px; font-family: Arial, sans-serif;">
                                            ${buildDuration}
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <!-- Failure Details Section -->
        <tr style="${buildResult != 'SUCCESS' ? '' : 'display: none;'}">
            <td style="padding: 24px;">
                <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #242938;">
                    <tr>
                        <td style="padding: 24px; border-radius: 16px;">
                            <div style="color: #ff4d6b; font-size: 16px; margin-bottom: 16px; font-family: Arial, sans-serif;">
                                Failure Details
                            </div>
                            <table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
                                <tr>
                                    <td style="width: 33%; padding-right: 16px;">
                                        <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #1a1f2e;">
                                            <tr>
                                                <td style="padding: 16px; border-radius: 12px;">
                                                    <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                                        Failed Tests
                                                    </div>
                                                    <div style="color: #ff4d6b; font-size: 24px; font-family: Arial, sans-serif;">
                                                        ${failedTests}
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td style="width: 33%; padding-right: 16px;">
                                        <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #1a1f2e;">
                                            <tr>
                                                <td style="padding: 16px; border-radius: 12px;">
                                                    <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                                        Error Type
                                                    </div>
                                                    <div style="color: #ffffff; font-size: 14px; font-family: Arial, sans-serif;">
                                                        ${errorType}
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td style="width: 33%;">
                                        <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #1a1f2e;">
                                            <tr>
                                                <td style="padding: 16px; border-radius: 12px;">
                                                    <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px; font-family: Arial, sans-serif;">
                                                        Stack Trace
                                                    </div>
                                                    <div style="color: #8b92a5; font-family: monospace; font-size: 12px; white-space: pre-wrap;">
                                                        ${stackTrace}
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <!-- Artifacts Section -->
        <tr style="${hasArtifacts ? '' : 'display: none;'}">
            <td style="padding: 0 24px 24px;">
                <table cellpadding="0" cellspacing="0" border="0" style="width: 100%; background-color: #242938;">
                    <tr>
                        <td style="padding: 24px; border-radius: 16px;">
                            <table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
                                <tr>
                                    <td style="width: 48px; vertical-align: top;">
                                        <img alt="files" src="${filesIconUrl}" style="width: 48px; display: block;">
                                    </td>
                                    <td style="padding-left: 24px; vertical-align: top;">
                                        <div style="color: #8b92a5; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-family: Arial, sans-serif;">
                                            App Files
                                        </div>
                                        <div style="color: #ffffff; font-size: 18px; margin-top: 8px; font-family: Arial, sans-serif;">
                                            Ready to download & install
                                        </div>
                                    </td>
                                    <td style="text-align: right;">
                                        <table cellpadding="0" cellspacing="0" border="0" style="margin-left: auto;">
                                            <tr>
                                                <td style="background-color: #4f46e5; border-radius: 12px;">
                                                    <a href="${downloadUrl}" style="display: block; color: white; text-decoration: none; padding: 12px 24px; font-size: 14px; font-family: Arial, sans-serif;">
                                                        Download
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <!-- Footer Section -->
        <tr>
            <td style="padding: 24px;">
                <table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
                    <tr>
                        <td style="vertical-align: top;">
                            <div style="color: #8b92a5; font-size: 12px; letter-spacing: 1px; font-family: Arial, sans-serif;">
                                Provided by Jenkins
                            </div>
                        </td>
                        <td style="text-align: right;">
                            <a href="${jenkinsUrl}" style="color: #4f46e5; text-decoration: none; font-size: 14px; font-family: Arial, sans-serif;">View in Jenkins →</a>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <!--[if mso]>
    </td></tr>
    </table>
    <![endif]-->
</body>
</html>
