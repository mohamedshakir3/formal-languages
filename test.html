<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>Jenkins Build Status</title>
</head>
<body style="margin: 0; padding: 0; background-color: #1a1f2e;">
    <table style="width: 90%; max-width: 800px; margin: 0 auto; border-collapse: collapse; background-color: #1a1f2e; color: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
        <!-- Header Section -->
        <thead>
            <tr>
                <td colspan="3" style="padding: 32px 24px;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="width: 156px;">
                                <img alt="logo" src="${logoUrl}" style="max-width: 120px;">
                            </td>
                            <td style="padding-left: 24px;">
                                <div style="font-size: 12px; color: #8b92a5; letter-spacing: 2px; text-transform: uppercase;">
                                    Jenkins Workflow Status
                                </div>
                                <div style="font-size: 24px; color: #ffffff; letter-spacing: 0.5px; margin-top: 8px; font-weight: 500;">
                                    ${buildResult == 'SUCCESS' ? 'The job is done' : "The job couldn't be done"}
                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </thead>

        <tbody>
            <!-- Main Build Info Card -->
            <tr>
                <td colspan="3" style="padding: 0 24px;">
                    <div style="background-color: #242938; border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="width: 48px;">
                                    <img alt="jenkins" src="${jenkinsLogoUrl}" style="width: 48px;">
                                </td>
                                <td style="padding-left: 24px;">
                                    <div style="color: #ffffff; font-size: 18px; margin-bottom: 8px;">
                                        ${projectName}
                                    </div>
                                    <div style="color: #8b92a5; font-size: 14px;">
                                        Deploys from GitHub • Build #${buildNumber} • ${buildDuration}
                                    </div>
                                    <div style="margin-top: 12px;">
                                        <span style="background-color: ${buildResult == 'SUCCESS' ? '#1a402b' : '#4a1c24'}; color: ${buildResult == 'SUCCESS' ? '#4ade80' : '#ff4d6b'}; padding: 4px 12px; border-radius: 12px; font-size: 14px;">
                                            ${buildResult}
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <!-- Build Metrics Section -->
            <tr>
                <td colspan="3" style="padding: 0 24px;">
                    <table style="width: 100%; border-collapse: separate; border-spacing: 16px;">
                        <tr>
                            <td style="background-color: #242938; border-radius: 16px; padding: 24px; width: 33%;">
                                <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px;">
                                    Tests Passed
                                </div>
                                <div style="color: #ffffff; font-size: 24px;">
                                    ${testCount}
                                </div>
                            </td>
                            <td style="background-color: #242938; border-radius: 16px; padding: 24px; width: 33%;">
                                <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px;">
                                    Coverage
                                </div>
                                <div style="color: #ffffff; font-size: 24px;">
                                    ${coverage}%
                                </div>
                            </td>
                            <td style="background-color: #242938; border-radius: 16px; padding: 24px; width: 33%;">
                                <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px;">
                                    Build Time
                                </div>
                                <div style="color: #ffffff; font-size: 24px;">
                                    ${buildDuration}
                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

            <!-- Failure Details Section -->
            <tr style="${buildResult != 'SUCCESS' ? '' : 'display: none;'}">
                <td colspan="3" style="padding: 24px;">
                    <div style="background-color: #242938; border-radius: 16px; padding: 24px;">
                        <div style="color: #ff4d6b; font-size: 16px; margin-bottom: 16px; letter-spacing: 0.5px;">
                            Failure Details
                        </div>
                        <table style="width: 100%; border-collapse: separate; border-spacing: 16px;">
                            <tr>
                                <td style="background-color: #1a1f2e; border-radius: 12px; padding: 16px; width: 33%;">
                                    <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px;">
                                        Failed Tests
                                    </div>
                                    <div style="color: #ff4d6b; font-size: 24px;">
                                        ${failedTests}
                                    </div>
                                </td>
                                <td style="background-color: #1a1f2e; border-radius: 12px; padding: 16px; width: 33%;">
                                    <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px;">
                                        Error Type
                                    </div>
                                    <div style="color: #ffffff; font-size: 14px;">
                                        ${errorType}
                                    </div>
                                </td>
                                <td style="background-color: #1a1f2e; border-radius: 12px; padding: 16px; width: 33%;">
                                    <div style="color: #8b92a5; font-size: 14px; margin-bottom: 8px;">
                                        Stack Trace
                                    </div>
                                    <div style="color: #8b92a5; font-family: monospace; font-size: 12px; white-space: pre-wrap;">
                                        ${stackTrace}
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <!-- Artifacts Section -->
            <tr style="${hasArtifacts ? '' : 'display: none;'}">
                <td colspan="3" style="padding: 0 24px 24px;">
                    <div style="background-color: #242938; border-radius: 16px; padding: 24px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="width: 48px;">
                                    <img alt="files" src="${filesIconUrl}" style="width: 48px;">
                                </td>
                                <td style="padding-left: 24px;">
                                    <div style="color: #8b92a5; font-size: 12px; text-transform: uppercase; letter-spacing: 1px;">
                                        App Files
                                    </div>
                                    <div style="color: #ffffff; font-size: 18px; margin-top: 8px;">
                                        Ready to download & install
                                    </div>
                                </td>
                                <td style="text-align: right;">
                                    <a href="${downloadUrl}" style="display: inline-block; background-color: #4f46e5; color: white; text-decoration: none; padding: 12px 24px; border-radius: 12px; font-size: 14px;">
                                        Download
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
        </tbody>

        <!-- Footer Section -->
        <tfoot>
            <tr>
                <td colspan="3" style="padding: 24px;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td>
                                <div style="color: #8b92a5; font-size: 12px; letter-spacing: 1px;">
                                    Provided by Jenkins
                                </div>
                            </td>
                            <td style="text-align: right;">
                                <a href="${jenkinsUrl}" style="color: #4f46e5; text-decoration: none; font-size: 14px;">View in Jenkins →</a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tfoot>
    </table>
</body>
</html>
